# í† ì´ í”„ë¡œì íŠ¸ 4 : ì±—ë´‡ì„ ë„˜ì–´ ì½œë´‡ìœ¼ë¡œ based on AI (RAG + LLM)
### [í”„ë¡œì íŠ¸ ê°œìš”]
- **í”„ë¡œì íŠ¸ ëª…** : ì±—ë´‡ì„ ë„˜ì–´ ì½œë´‡ìœ¼ë¡œ based on AI (RAG + LLM)
- **ìƒì„¸ ë‚´ìš© :** [í”„ë¡œì íŠ¸ RFP ë…¸ì…˜ ë§í¬](https://www.notion.so/Toy-Project-4-22f9047c353d80fea377d6a4c4b23415?source=copy_link)
- **ìˆ˜í–‰ ë° ê²°ê³¼ë¬¼ ì œì¶œ ê¸°í•œ** : 7/14 (ì›”) ~ 8/1 (ê¸ˆ) 14:00
- **ë©˜í† ì§„ ì½”ë“œë¦¬ë·° ê¸°í•œ** : 8/4 (ì›”) ~ 8/17 (ì¼), 2ì£¼ ê°„ ì§„í–‰


### [í”„ë¡œì íŠ¸ ì§„í–‰ ë° ì œì¶œ ë°©ë²•]
- ë³¸ íŒ¨ìŠ¤íŠ¸ìº í¼ìŠ¤ Githubì˜ Repositoryë¥¼ ê° ì¡°ë³„ì˜ Github Repositoryë¥¼ ìƒì„± í›„ Forkí•©ë‹ˆë‹¤.
    - íŒ¨ìŠ¤íŠ¸ìº í¼ìŠ¤ ê¹ƒí—™ì€ Private í˜•íƒœ (Public ë¶ˆê°€)
- ì¡°ë³„ ë ˆí¬ì˜ ìµœì¢… branch â†’ íŒ¨ìŠ¤íŠ¸ìº í¼ìŠ¤ ì—…ìŠ¤íŠ¸ë¦¼ Repositoryì˜ main branchì˜ **PR ìƒíƒœ**ë¡œ ì œì¶œí•©ë‹ˆë‹¤.
    - **PR TITLE : Nì¡° ìµœì¢… ì œì¶œ**
    - Pull Request ë§í¬ë¥¼ LMSë¡œë„ ì œì¶œí•´ ì£¼ì…”ì•¼ ìµœì¢… ì œì¶œ ì™„ë£Œ ë©ë‹ˆë‹¤. (ì œì¶œì: ì¡°ë³„ ëŒ€í‘œì 1ì¸)
    - LMSë¥¼ í†µí•œ ê³¼ì œ ë¯¸ì œì¶œ ì‹œ ì ìˆ˜ê°€ ë¶€ì—¬ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
- PR ì œì¶œ ì‹œ ìœ ì˜ì‚¬í•­
    - í”„ë¡œì íŠ¸ ì§„í–‰ ê²°ê³¼ ë° ê³¼ì—… ìˆ˜í–‰ ë‚´ìš©ì€ README.mdì— ìƒì„¸íˆ ì‘ì„± ë¶€íƒ ë“œë¦½ë‹ˆë‹¤.
    - ë©˜í† ë‹˜ë“¤ê»˜ì„œ ì–´í”Œë¦¬ì¼€ì´ì…˜Â ì‹¤í–‰ì„ ìœ„í•´ í™•ì¸í•´ì•¼ í•  í™˜ê²½ì„¤ì • ê°’ ë“±ë„Â ë°˜ë“œì‹œ PR ë¶€ê°€ ì„¤ëª…ë€ í˜¹ì€ README.mdì— ì‘ì„± ë¶€íƒ ë“œë¦½ë‹ˆë‹¤.
    - **Pull Requestì—ì„œ ì œì¶œ í›„ ì ˆëŒ€ ë³‘í•©(Merge)í•˜ì§€ ì•Šë„ë¡ ì£¼ì˜í•˜ì„¸ìš”!**
    - ìˆ˜í–‰ ë° ì œì¶œ ê³¼ì •ì—ì„œ ë¬¸ì œê°€ ë°œìƒí•œ ê²½ìš°, ë°”ë¡œ ì§ˆì˜ì‘ë‹µ ë©˜í† ë‹˜ì´ë‚˜ ê°•ì‚¬ë‹˜ì—ê²Œ ì–˜ê¸°í•˜ì„¸ìš”! (ê°•ì‚¬ë‹˜ê»˜ì„œ í•„ìš”ì‹œ ê°œë³„ íŒíŠ¸ ì œê³µ)


# ğŸ“š ì±…í¬ì¸ - AI ê¸°ë°˜ ì˜¨ë¼ì¸ ì„œì  í”„ë¡œì íŠ¸

## í”„ë¡œì íŠ¸ ì†Œê°œ Introduction
Spring Bootì™€ AI ê¸°ìˆ ì„ ìœµí•©í•œ ì§€ëŠ¥í˜• ì˜¨ë¼ì¸ ì„œì  ì‹œìŠ¤í…œìœ¼ë¡œ, ì‚¬ìš©ìì™€ ê´€ë¦¬ìë¥¼ ìœ„í•œ ì¢…í•©ì ì¸ ë„ì„œ ì‡¼í•‘ëª° ê¸°ëŠ¥ê³¼ **AI ê¸°ë°˜ ë„ì„œ ì¶”ì²œ ì±—ë´‡**ì„ ì œê³µí•©ë‹ˆë‹¤.

### ì£¼ìš” íŠ¹ì§•
- ğŸ” **ì‚¬ìš©ì/ê´€ë¦¬ì ë¶„ë¦¬ëœ ì¸ì¦ ì‹œìŠ¤í…œ**
- ğŸ“– **3ë‹¨ê³„ ê³„ì¸µí˜• ì¹´í…Œê³ ë¦¬ êµ¬ì¡°**
- ğŸ›’ **ì‹¤ì‹œê°„ ì¬ê³  ì—°ë™ ì¥ë°”êµ¬ë‹ˆ**
- ğŸ’³ **KakaoPay API ì—°ë™ ê²°ì œ ì‹œìŠ¤í…œ**
- ğŸ“± **ë°˜ì‘í˜• ì›¹ ë””ìì¸**
- âš¡ **ìºì‹± ê¸°ë°˜ ì„±ëŠ¥ ìµœì í™”**
- ğŸ¤– **AI ë„ì„œ ì¶”ì²œ ì±—ë´‡ ì‹œìŠ¤í…œ (RAG + LLM)**
- ğŸ§  **ê°ì • ê¸°ë°˜ ê°œì¸í™” ì¶”ì²œ**
- ğŸ” **í•˜ì´ë¸Œë¦¬ë“œ ê²€ìƒ‰ ì—”ì§„ (ë²¡í„° + í‚¤ì›Œë“œ)**

## ğŸ“‹ ëª©ì°¨
- [í”„ë¡œì íŠ¸ ê°œìš”](#í”„ë¡œì íŠ¸-ê°œìš”)
- [ê¸°ìˆ  ìŠ¤íƒ](#ê¸°ìˆ -ìŠ¤íƒ)
- [ì£¼ìš” ê¸°ëŠ¥](#ì£¼ìš”-ê¸°ëŠ¥)
- [API ëª…ì„¸ì„œ](#api-ëª…ì„¸ì„œ)
- [ì„¤ì¹˜ ë° ì‹¤í–‰](#ì„¤ì¹˜-ë°-ì‹¤í–‰)
- [ë°ì´í„°ë² ì´ìŠ¤ ì„¤ì •](#ë°ì´í„°ë² ì´ìŠ¤-ì„¤ì •)
- [í™˜ê²½ ì„¤ì •](#í™˜ê²½-ì„¤ì •)
- [íŠ¸ëŸ¬ë¸”ìŠˆíŒ…](#íŠ¸ëŸ¬ë¸”ìŠˆíŒ…)

## ğŸ¯ í”„ë¡œì íŠ¸ ê°œìš”

### ERD (Entity Relationship Diagram)
![ì±…í¬ì¸ ERD](src/main/resources/static/layout/ì±…í¬ì¸_ERD.png)

### ì•„í‚¤í…ì²˜
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Presentation  â”‚    â”‚    Business     â”‚    â”‚      Data       â”‚
â”‚   (Controller)  â”‚â—„â”€â”€â–ºâ”‚   (Service)     â”‚â—„â”€â”€â–ºâ”‚  (Repository)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚                                                                â”‚
â”‚  - @Controller        â”‚  - @Service          â”‚  - @Repository  â”‚
â”‚  - REST API           â”‚  - ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§      â”‚  - JPA/Hibernateâ”‚
â”‚  - Thymeleaf          â”‚  - íŠ¸ëœì­ì…˜ ê´€ë¦¬      â”‚  - MySQL ì—°ë™   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ›  ê¸°ìˆ  ìŠ¤íƒ

### Backend (Java Spring Boot)
- **Java 17** - ìµœì‹  LTS ë²„ì „
- **Spring Boot 3.3.1** - ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ í”„ë ˆì„ì›Œí¬
- **Spring Data JPA** - ORM ë° ë°ì´í„° ì•¡ì„¸ìŠ¤
- **Spring Web** - RESTful API ê°œë°œ
- **Hibernate** - ORM êµ¬í˜„ì²´
- **MySQL 8.0** - ê´€ê³„í˜• ë°ì´í„°ë² ì´ìŠ¤

### AI Service (Python FastAPI)
- **Python 3.11+** - AI ì„œë¹„ìŠ¤ ë°±ì—”ë“œ
- **FastAPI** - AI API ì„œë²„ í”„ë ˆì„ì›Œí¬
- **LangChain** - LLM ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜ í”„ë ˆì„ì›Œí¬
- **OpenAI GPT-4** - ëŒ€í™”í˜• AI ëª¨ë¸
- **ChromaDB** - ë²¡í„° ë°ì´í„°ë² ì´ìŠ¤
- **OpenAI Embeddings** - ë¬¸ì„œ ì„ë² ë”© ìƒì„±

### Frontend
- **Thymeleaf** - ì„œë²„ ì‚¬ì´ë“œ í…œí”Œë¦¿ ì—”ì§„
- **HTML5/CSS3** - ë§ˆí¬ì—… ë° ìŠ¤íƒ€ì¼ë§
- **JavaScript ES6+** - í´ë¼ì´ì–¸íŠ¸ ì‚¬ì´ë“œ ë¡œì§
- **ë¶€íŠ¸ìŠ¤íŠ¸ë© ìŠ¤íƒ€ì¼** - ë°˜ì‘í˜• ë””ìì¸

### ì™¸ë¶€ API & AI ì„œë¹„ìŠ¤
- **KakaoPay API** - ê²°ì œ ì‹œìŠ¤í…œ
- **JavaMail API** - ì´ë©”ì¼ ë°œì†¡ (ì•„ì´ë””/ë¹„ë°€ë²ˆí˜¸ ì°¾ê¸°)
- **OpenAI API** - GPT-4 ë° ì„ë² ë”© ì„œë¹„ìŠ¤
- **Aladin API** - ë„ì„œ ë©”íƒ€ë°ì´í„° ìˆ˜ì§‘
- **Kakao Book API** - ì¶”ê°€ ë„ì„œ ì •ë³´ ìˆ˜ì§‘

### ê°œë°œ ë„êµ¬
- **IntelliJ IDEA** - í†µí•© ê°œë°œ í™˜ê²½
- **Maven** - ì˜ì¡´ì„± ê´€ë¦¬ ë° ë¹Œë“œ ë„êµ¬
- **Git & GitHub** - ë²„ì „ ê´€ë¦¬
- **MySQL** - ë°ì´í„°ë² ì´ìŠ¤ ê´€ë¦¬
- **Docker & Docker Compose** - ì»¨í…Œì´ë„ˆ ê¸°ë°˜ ë°°í¬
- **VS Code** - Python AI ì„œë¹„ìŠ¤ ê°œë°œ

## âœ¨ ì£¼ìš” ê¸°ëŠ¥

### ğŸ‘¤ ì‚¬ìš©ì ê¸°ëŠ¥

#### ğŸ” **íšŒì› ê´€ë¦¬**
- âœ… íšŒì›ê°€ì… (ì‹¤ëª…ì¸ì¦, ì´ë©”ì¼ ì¤‘ë³µê²€ì‚¬)
- âœ… ë¡œê·¸ì¸/ë¡œê·¸ì•„ì›ƒ (30ë¶„ ì„¸ì…˜ ê´€ë¦¬)
- âœ… ì•„ì´ë””/ë¹„ë°€ë²ˆí˜¸ ì°¾ê¸° (ì´ë©”ì¼ ë°œì†¡)
- âœ… íšŒì›ì •ë³´ ìˆ˜ì •
- âœ… íœ´ë©´ê³„ì • ê´€ë¦¬ (ìŠ¤ì¼€ì¤„ëŸ¬ ê¸°ë°˜)

#### ğŸ“– **ìƒí’ˆ ì¡°íšŒ**
- âœ… ë©”ì¸ í˜ì´ì§€ (ë² ìŠ¤íŠ¸ì…€ëŸ¬, ì‹ ìƒí’ˆ, ì¸ê¸°ê²€ìƒ‰ì–´)
- âœ… ì¹´í…Œê³ ë¦¬ë³„ ìƒí’ˆ ë¸Œë¼ìš°ì§• (ëŒ€ë¶„ë¥˜ > ì¤‘ë¶„ë¥˜ > ì†Œë¶„ë¥˜)
- âœ… ìƒí’ˆ ê²€ìƒ‰ (ì¼ë°˜ê²€ìƒ‰, ìƒì„¸ê²€ìƒ‰)
- âœ… ìƒí’ˆ ìƒì„¸ ì •ë³´ (ì¬ê³ , ë¦¬ë·°, í‰ì )
- âœ… ìµœê·¼ ë³¸ ìƒí’ˆ (ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ ê¸°ë°˜)

#### ğŸ›’ **ì¥ë°”êµ¬ë‹ˆ**
- âœ… ìƒí’ˆ ì¶”ê°€/ìˆ˜ì •/ì‚­ì œ
- âœ… ì‹¤ì‹œê°„ ì¬ê³  í™•ì¸ (API ìºì‹±)
- âœ… ìˆ˜ëŸ‰ ì¡°ì ˆ (ì¬ê³ ëŸ‰ ì´ˆê³¼ ë°©ì§€)
- âœ… ì„ íƒ ìƒí’ˆ ì£¼ë¬¸
- âœ… í˜ì´ì§€ë„¤ì´ì…˜ (10ê°œì”©)

#### ğŸ’³ **ì£¼ë¬¸/ê²°ì œ**
- âœ… ì£¼ë¬¸ì„œ ì‘ì„± (ë°°ì†¡ì§€, ìˆ˜ëŸ‰ í™•ì¸)
- âœ… KakaoPay ê²°ì œ ì—°ë™
- âœ… ì£¼ë¬¸ ìƒíƒœ ì¶”ì  (7ë‹¨ê³„)
- âœ… ì£¼ë¬¸ ì·¨ì†Œ
- âœ… ì£¼ë¬¸ ë‚´ì—­ ì¡°íšŒ

#### â­ **ë¦¬ë·° ì‹œìŠ¤í…œ**
- âœ… ë¦¬ë·° ì‘ì„±/ìˆ˜ì •/ì‚­ì œ
- âœ… í‰ì  ì‹œìŠ¤í…œ (1-5ì )
- âœ… ë¦¬ë·° í˜ì´ì§€ë„¤ì´ì…˜
- âœ… Soft Delete ì§€ì›

#### ğŸ¤– **AI ì±—ë´‡ ê¸°ëŠ¥**
- âœ… ê°ì • ê¸°ë°˜ ë„ì„œ ì¶”ì²œ
- âœ… ìì—°ì–´ ëŒ€í™” ì¸í„°í˜ì´ìŠ¤
- âœ… ê°œì¸í™”ëœ ì¶”ì²œ ì‹œìŠ¤í…œ
- âœ… ì„¸ì…˜ ê¸°ë°˜ ëŒ€í™” ê´€ë¦¬
- âœ… ì˜ë„ ë¶„ë¥˜ ë° ì¿¼ë¦¬ ë¶„ì„
- âœ… RAG (Retrieval-Augmented Generation) ê¸°ë°˜ ê²€ìƒ‰
- âœ… í•˜ì´ë¸Œë¦¬ë“œ ê²€ìƒ‰ (ë²¡í„° + í‚¤ì›Œë“œ)
- âœ… ì‹¤ì‹œê°„ clarification ì²˜ë¦¬

### ğŸ‘¨â€ğŸ’¼ ê´€ë¦¬ì ê¸°ëŠ¥

#### ğŸ“¦ **ìƒí’ˆ ê´€ë¦¬**
- âœ… ìƒí’ˆ ë“±ë¡/ìˆ˜ì •/ì‚­ì œ
- âœ… ì¬ê³  ê´€ë¦¬ (ì…ê³ /ì¶œê³  ì´ë ¥)
- âœ… ìƒí’ˆ ìƒíƒœ ë³€ê²½ (íŒë§¤ì¤‘/í’ˆì ˆ/ì ˆíŒ/ì…ê³ ì˜ˆì •)
- âœ… ì¹´í…Œê³ ë¦¬ ê´€ë¦¬
- âœ… ìƒí’ˆ ê²€ìƒ‰/í•„í„°ë§ (ìƒì„¸ê²€ìƒ‰)

#### ğŸ“‹ **ì£¼ë¬¸ ê´€ë¦¬**
- âœ… ì£¼ë¬¸ ë‚´ì—­ ì¡°íšŒ
- âœ… ì£¼ë¬¸ ìƒíƒœ ë³€ê²½
- âœ… ê¸°ê°„ë³„ ì£¼ë¬¸ ê²€ìƒ‰
- âœ… ì£¼ë¬¸ ìƒì„¸ ì •ë³´ í™•ì¸

#### ğŸ‘¥ **íšŒì› ê´€ë¦¬**
- âœ… íšŒì› ì •ë³´ ì¡°íšŒ
- âœ… íšŒì› ê²€ìƒ‰ (ë‹¤ì¤‘ ì¡°ê±´)
- âœ… íšŒì›ë³„ ì£¼ë¬¸ ë‚´ì—­ í™•ì¸
- âœ… íšŒì› ìƒíƒœ ê´€ë¦¬

#### ğŸ”’ **ê´€ë¦¬ì ê¶Œí•œ ì œì–´**
- âœ… ê´€ë¦¬ì ì „ìš© í˜ì´ì§€ ì ‘ê·¼ ì œí•œ
- âœ… ì¼ë°˜ ì‚¬ìš©ì ê¸°ëŠ¥ ì°¨ë‹¨ (ì¥ë°”êµ¬ë‹ˆ, ë§ˆì´í˜ì´ì§€)
- âœ… URL ì§ì ‘ ì ‘ì† ì°¨ë‹¨

### ğŸ¤– AI ì„œë¹„ìŠ¤ ê¸°ëŠ¥

#### ğŸ§  **ì¶”ì²œ ì—ì´ì „íŠ¸ (`recommend_agent.py`)**
- âœ… ê°ì •, ì¥ë¥´, í‚¤ì›Œë“œ ê¸°ë°˜ ë„ì„œ ì¶”ì²œ
- âœ… MMR(Maximum Marginal Relevance) ê¸°ë°˜ ë‹¤ì–‘ì„± ê²€ìƒ‰
- âœ… ë²¡í„° ë°ì´í„°ë² ì´ìŠ¤ í™œìš©í•œ ìœ ì‚¬ë„ ê²€ìƒ‰

#### ğŸ“š **ìœ„í‚¤ ê²€ìƒ‰ ì—ì´ì „íŠ¸ (`wiki_search_agent.py`)**
- âœ… ì‘ê°€ ì •ë³´ ê²€ìƒ‰ ë° ì œê³µ
- âœ… ë„ì„œ ê´€ë ¨ ì •ë³´ ê²€ìƒ‰
- âœ… êµ¬ì¡°í™”ëœ ì‘ë‹µ ìƒì„±

#### ğŸ¯ **ë©”ì¸ ì—ì´ì „íŠ¸ (`main_agent.py`)**
- âœ… ì‚¬ìš©ì ì˜ë„ ë¶„ë¥˜ (`intent_classify_chain.py`)
- âœ… ì¿¼ë¦¬ ë¶„ì„ (`query_analysis_chain.py`)
- âœ… ì„¸ì…˜ ê´€ë¦¬ ë° ëŒ€í™” íˆìŠ¤í† ë¦¬ ì¶”ì 
- âœ… ì—ì´ì „íŠ¸ ë¼ìš°íŒ… (`intent_router.py`)

## ğŸŒ API ëª…ì„¸ì„œ

### ğŸ“‹ **ì¸ì¦ ê´€ë ¨ API**
| Method | Endpoint | Description | Request | Response |
|--------|----------|-------------|---------|----------|
| GET | `/login` | ë¡œê·¸ì¸ í˜ì´ì§€ | - | HTML |
| POST | `/login` | ë¡œê·¸ì¸ ì²˜ë¦¬ | `LoginRequest` | Redirect |
| POST | `/logout` | ë¡œê·¸ì•„ì›ƒ | - | Redirect |
| GET | `/register` | íšŒì›ê°€ì… í˜ì´ì§€ | - | HTML |
| POST | `/api/register` | íšŒì›ê°€ì… ì²˜ë¦¬ | `RegisterRequest` | `RegisterResponse` |
| POST | `/findId` | ì•„ì´ë”” ì°¾ê¸° | `name, email` | String |
| POST | `/findPassword` | ë¹„ë°€ë²ˆí˜¸ ì°¾ê¸° | `idForUser, email` | String |

### ğŸ“– **ìƒí’ˆ ê´€ë ¨ API**
| Method | Endpoint | Description | Parameters | Response |
|--------|----------|-------------|------------|----------|
| GET | `/main` | ë©”ì¸ í˜ì´ì§€ | - | HTML + ë² ìŠ¤íŠ¸ì…€ëŸ¬/ì‹ ìƒí’ˆ |
| GET | `/product/detail/{isbn}` | ìƒí’ˆ ìƒì„¸ | `isbn`, `page` | `Product` + ë¦¬ë·° |
| GET | `/product/category/low/{categoryId}` | ì¹´í…Œê³ ë¦¬ë³„ ìƒí’ˆ | `categoryId`, `page`, `size`, `sort` | `ProductListPageResponse` |
| GET | `/product/search` | ì¼ë°˜ ê²€ìƒ‰ | `q`, `page`, `size`, `sort` | `ProductListPageResponse` |
| GET | `/product/search-advanced` | ìƒì„¸ ê²€ìƒ‰ | `title`, `author`, `publisher` | `ProductListPageResponse` |
| GET | `/api/popular-keywords` | ì¸ê¸° ê²€ìƒ‰ì–´ Top 10 | - | `List<ProductSimpleResponse>` |
| GET | `/api/bestseller` | ë² ìŠ¤íŠ¸ì…€ëŸ¬ | `period` (week/month/year) | `List<ProductSimpleResponse>` |
| GET | `/api/newproducts` | ì‹ ìƒí’ˆ Top 10 | - | `List<ProductSimpleResponse>` |

### ğŸ›’ **ì¥ë°”êµ¬ë‹ˆ API**
| Method | Endpoint | Description | Request Body | Response |
|--------|----------|-------------|--------------|----------|
| GET | `/cart` | ì¥ë°”êµ¬ë‹ˆ í˜ì´ì§€ | - | HTML |
| POST | `/cart/add` | ìƒí’ˆ ì¶”ê°€ | `isbn`, `quantity` | String |
| POST | `/cart/add-bulk` | ì¼ê´„ ì¶”ê°€ | `List<String> isbns` | String |
| POST | `/cart/check` | ì¤‘ë³µ ìƒí’ˆ í™•ì¸ | `List<String> isbns` | `Map<String, Object>` |
| POST | `/cart/update` | ìˆ˜ëŸ‰ ë³€ê²½ | `isbn`, `quantity` | String |
| POST | `/cart/delete` | ìƒí’ˆ ì‚­ì œ | `isbn` | String |
| GET | `/cart/list` | ì¥ë°”êµ¬ë‹ˆ ëª©ë¡ | - | `List<CartItemResponse>` |
| GET | `/product/api/stock/{isbn}` | ì¬ê³  í™•ì¸ | `isbn` | `Map<String, Integer>` |

### ğŸ¤– **AI ì±„íŒ… API**
| Method | Endpoint | Description | Request Body | Response |
|--------|----------|-------------|--------------|----------|
| POST | `/api/chat/message` | ì±„íŒ… ë©”ì‹œì§€ ì „ì†¡ | `{"message": "ì‚¬ìš©ì ë©”ì‹œì§€"}` | `Map<String, Object>` |
| GET | `/health` | AI ì„œë¹„ìŠ¤ ìƒíƒœ í™•ì¸ | - | `{"status": "healthy"}` |
| POST | `/api/chat` | AI ì±—ë´‡ ëŒ€í™” (FastAPI) | `ChatRequest` | `{"response": "AI ì‘ë‹µ", "success": true}` |

### ğŸ’³ **ì£¼ë¬¸/ê²°ì œ API**
| Method | Endpoint | Description | Request Body | Response |
|--------|----------|-------------|--------------|----------|
| GET | `/order` | ì£¼ë¬¸ í˜ì´ì§€ | - | HTML |
| POST | `/api/order/create` | ì£¼ë¬¸ ìƒì„± | `OrderRequest` | `Map<String, Object>` |
| POST | `/api/payment/attempt` | ê²°ì œ ì‹œë„ | `PaymentRequest` | KakaoPay Response |
| POST | `/api/payment/complete` | ê²°ì œ ì™„ë£Œ | `paymentId`, `pgToken` | Redirect |
| POST | `/api/payment/fail` | ê²°ì œ ì‹¤íŒ¨ | `paymentId` | Redirect |
| GET | `/order/summary` | ì£¼ë¬¸ ìš”ì•½ | `orderId` | HTML |
| POST | `/api/orders/cancel` | ì£¼ë¬¸ ì·¨ì†Œ | `orderId`, `idForAdmin` | String |

### ğŸ‘¤ **ë§ˆì´í˜ì´ì§€ API**
| Method | Endpoint | Description | Request | Response |
|--------|----------|-------------|---------|----------|
| GET | `/mypage` | ë§ˆì´í˜ì´ì§€ | - | HTML + ì‚¬ìš©ì ì •ë³´ |
| POST | `/api/user/update` | íšŒì›ì •ë³´ ìˆ˜ì • | `UserUpdateRequest` | String |
| GET | `/api/user/orders` | ì£¼ë¬¸ ë‚´ì—­ | `page`, `size` | `List<OrderHistoryResponse>` |

### â­ **ë¦¬ë·° API**
| Method | Endpoint | Description | Request Body | Response |
|--------|----------|-------------|--------------|----------|
| POST | `/api/review/write` | ë¦¬ë·° ì‘ì„± | `ReviewRequest` | String |
| POST | `/api/review/edit` | ë¦¬ë·° ìˆ˜ì • | `ReviewRequest` | String |
| POST | `/api/review/delete` | ë¦¬ë·° ì‚­ì œ | `reviewId` | String |

### ğŸ‘¨â€ğŸ’¼ **ê´€ë¦¬ì API**

#### ìƒí’ˆ ê´€ë¦¬
| Method | Endpoint | Description | Request | Response |
|--------|----------|-------------|---------|----------|
| GET | `/admin/product-inquiry` | ìƒí’ˆ ì¡°íšŒ í˜ì´ì§€ | í•„í„° íŒŒë¼ë¯¸í„°ë“¤ | HTML |
| POST | `/admin/api/products/{isbn}/stock-in` | ì…ê³  ì²˜ë¦¬ | `quantity` | String |
| POST | `/admin/api/products/{isbn}/status` | ìƒíƒœ ë³€ê²½ | `status` | String |
| POST | `/admin/api/products/{isbn}/price` | ê°€ê²© ë³€ê²½ | `price` | String |
| POST | `/admin/api/product/register` | ìƒí’ˆ ë“±ë¡ | `ProductRequest` | String |
| GET | `/admin/api/categories` | ì¹´í…Œê³ ë¦¬ ëª©ë¡ | - | `CategoryTreeResponse` |

#### ì£¼ë¬¸ ê´€ë¦¬
| Method | Endpoint | Description | Parameters | Response |
|--------|----------|-------------|------------|----------|
| GET | `/admin/order-inquiry` | ì£¼ë¬¸ ì¡°íšŒ í˜ì´ì§€ | ê²€ìƒ‰ ì¡°ê±´ë“¤ | HTML |
| GET | `/admin/api/orders` | ì£¼ë¬¸ ëª©ë¡ API | `page`, í•„í„° ì¡°ê±´ë“¤ | `AdminOrderPageResponse` |
| POST | `/admin/api/orders/{orderId}/status` | ì£¼ë¬¸ ìƒíƒœ ë³€ê²½ | `idForAdmin`, `status` | String |

#### íšŒì› ê´€ë¦¬
| Method | Endpoint | Description | Parameters | Response |
|--------|----------|-------------|------------|----------|
| GET | `/admin/user-inquiry` | íšŒì› ì¡°íšŒ í˜ì´ì§€ | ê²€ìƒ‰ ì¡°ê±´ë“¤ | HTML |
| GET | `/admin/api/users` | íšŒì› ëª©ë¡ API | `page`, í•„í„° ì¡°ê±´ë“¤ | `Page<User>` |
| GET | `/admin/api/users/{idForAdmin}/orders` | íŠ¹ì • íšŒì› ì£¼ë¬¸ ë‚´ì—­ | `idForAdmin` | `List<AdminOrderHistoryResponse>` |

## ğŸš€ ì„¤ì¹˜ ë° ì‹¤í–‰

### ì‚¬ì „ ìš”êµ¬ì‚¬í•­
- **Java 17** ì´ìƒ
- **Python 3.11** ì´ìƒ
- **Maven 3.6** ì´ìƒ
- **MySQL 8.0** ì´ìƒ
- **Docker & Docker Compose** (ì„ íƒì‚¬í•­)
- **Git**
- **OpenAI API Key** (AI ê¸°ëŠ¥ ì‚¬ìš©ì‹œ í•„ìˆ˜)

### 1. í”„ë¡œì íŠ¸ í´ë¡ 
```bash
git clone https://github.com/your-username/KDT_BE12_Toy_Project4.git
cd KDT_BE12_Toy_Project4
```

### 2. ë°ì´í„°ë² ì´ìŠ¤ ì„¤ì •

#### AWS RDS ì‚¬ìš© (í˜„ì¬ í”„ë¡œì íŠ¸ ë°©ì‹)
1. AWS RDS MySQL ì¸ìŠ¤í„´ìŠ¤ ìƒì„±
2. ë³´ì•ˆ ê·¸ë£¹ì—ì„œ 3306 í¬íŠ¸ ì—´ê¸°
3. `application.properties`ì— RDS ì—”ë“œí¬ì¸íŠ¸ ì„¤ì •

#### ë¡œì»¬ MySQL ì‚¬ìš© (ê°œë°œìš©)
```sql
CREATE DATABASE tp4team5 CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
CREATE USER 'bookstore_user'@'localhost' IDENTIFIED BY 'your_password';
GRANT ALL PRIVILEGES ON tp4team5.* TO 'bookstore_user'@'localhost';
FLUSH PRIVILEGES;
```

#### Docker MySQL ì‚¬ìš©
```bash
docker run --name mysql-bookstore \
  -e MYSQL_ROOT_PASSWORD=rootpassword \
  -e MYSQL_DATABASE=tp4team5 \
  -e MYSQL_USER=bookstore_user \
  -e MYSQL_PASSWORD=your_password \
  -p 3306:3306 -d mysql:8.0
```

### 3. ì• í”Œë¦¬ì¼€ì´ì…˜ ì„¤ì • íŒŒì¼ ìƒì„±
`src/main/resources/application.properties` íŒŒì¼ì„ ìƒì„±í•˜ê³  ë‹¤ìŒ ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”:

```properties
# ì• í”Œë¦¬ì¼€ì´ì…˜ ì´ë¦„
spring.application.name=KDT_BE12_Toy_Project4

# ë°ì´í„°ë² ì´ìŠ¤ ì„¤ì • (AWS RDS)
spring.datasource.url=jdbc:mysql://your-rds-endpoint:3306/your_database?serverTimezone=Asia/Seoul
spring.datasource.username=your_db_username
spring.datasource.password=your_db_password

# ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° í’€ ì„¤ì • (HikariCP)
spring.datasource.hikari.maximum-pool-size=5
spring.datasource.hikari.minimum-idle=2
spring.datasource.hikari.connection-timeout=20000
spring.datasource.hikari.idle-timeout=300000
spring.datasource.hikari.max-lifetime=1200000
spring.datasource.hikari.leak-detection-threshold=60000

# UTF-8 ì¸ì½”ë”© ì„¤ì • (ê°•í™”)
server.servlet.encoding.charset=UTF-8
server.servlet.encoding.enabled=true
server.servlet.encoding.force=true
server.servlet.encoding.force-request=true
server.servlet.encoding.force-response=true

# Thymeleaf ì„¤ì •
spring.thymeleaf.encoding=UTF-8
spring.thymeleaf.mode=HTML
spring.thymeleaf.cache=false
spring.thymeleaf.servlet.content-type=text/html; charset=UTF-8

# HTTP ë©”ì‹œì§€ ì»¨ë²„í„° ì¸ì½”ë”©
spring.http.encoding.charset=UTF-8
spring.http.encoding.enabled=true
spring.http.encoding.force=true

# ì¶”ê°€ ì¸ì½”ë”© ì„¤ì •
spring.messages.encoding=UTF-8
spring.banner.charset=UTF-8

# JPA ì„¤ì •
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQLDialect
spring.jpa.properties.hibernate.format_sql=true
logging.level.org.hibernate.SQL=debug
logging.level.org.hibernate.type.descriptor.sql=trace
logging.level.org.hibernate.orm.jdbc.bind=trace
logging.level.org.hibernate.orm.jdbc=trace
logging.level.org.hibernate=debug
logging.level.org.hibernate.type=trace

# ì´ë©”ì¼ ì„¤ì • (Gmail SMTP)
spring.mail.host=smtp.gmail.com
spring.mail.port=587
spring.mail.username=your_email@gmail.com
spring.mail.password=your_app_password
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true
spring.mail.default-encoding=UTF-8

# ë°œì‹ ì ì •ë³´
mail.sender.email=your_email@gmail.com
mail.sender.name=ì±…í¬ì¸ ê´€ë¦¬ì

# KakaoPay ì„¤ì •
kakaopay.admin-key=your_kakaopay_admin_key
kakaopay.cid=TC0ONETIME

# AI ì„œë¹„ìŠ¤ ì„¤ì • (í† ê¸€ ê°€ëŠ¥)
ai.service.enabled=true
ai.service.base-url=http://localhost:8000
ai.service.timeout=30000
ai.service.fallback-to-java=true

# OpenAI API í‚¤ (Javaì—ì„œ ì§ì ‘ ì‚¬ìš©)
openai.api.key=${OPENAI_API_KEY:}
openai.api.url=https://api.openai.com/v1/chat/completions
openai.model=gpt-3.5-turbo
openai.max-tokens=1000
openai.temperature=0.7
```

**âš ï¸ ì¤‘ìš” ì„¤ì • ì•ˆë‚´:**

### ë°ì´í„°ë² ì´ìŠ¤ ì„¤ì •
- **AWS RDS**: ì‹¤ì œ í”„ë¡œì íŠ¸ëŠ” AWS RDS MySQLì„ ì‚¬ìš©
- **ë¡œì»¬ ê°œë°œ**: MySQL ë¡œì»¬ ì„¤ì¹˜ ë˜ëŠ” Docker MySQL ì»¨í…Œì´ë„ˆ ì‚¬ìš©

### AI ì„œë¹„ìŠ¤ URL ì„¤ì •
| í™˜ê²½ | AI ì„œë¹„ìŠ¤ URL | ì„¤ëª… |
|------|------------|------|
| ë¡œì»¬ ê°œë°œ | `http://localhost:8000` | ê°œë³„ ì‹¤í–‰ ì‹œ |
| Docker Compose | `http://ai-service:8000` | ì»¨í…Œì´ë„ˆ ë‚´ë¶€ í†µì‹  |
| AWS/ì›ê²© | `http://your-domain:8000` | ì›ê²© ì„œë²„ ì£¼ì†Œ |

### í™˜ê²½ë³€ìˆ˜ ì„¤ì • í•„ìˆ˜
```bash
# í™˜ê²½ë³€ìˆ˜ë¡œ ì„¤ì •
export OPENAI_API_KEY=your_openai_api_key_here

# ë˜ëŠ” application.propertiesì— ì§ì ‘ ì…ë ¥
openai.api.key=your_openai_api_key_here
```

### 4. AI ì„œë¹„ìŠ¤ ì„¤ì • (Python)
`ai-service` ë””ë ‰í† ë¦¬ë¡œ ì´ë™í•˜ì—¬ Python í™˜ê²½ ì„¤ì •:
```bash
cd ai-service
python -m venv ai_venv
# Windows
ai_venv\Scripts\activate
# Linux/Mac
source ai_venv/bin/activate

pip install -r requirements.txt
```

### 5. AI ì„œë¹„ìŠ¤ í™˜ê²½ ë³€ìˆ˜ ì„¤ì •
`ai-service/.env` íŒŒì¼ ìƒì„±:
```env
# OpenAI API ì„¤ì •
OPENAI_API_KEY=your_openai_api_key_here

# ë²¡í„° ë°ì´í„°ë² ì´ìŠ¤ ì„¤ì •
CHROMA_DB_PATH=./data/chroma_db
COLLECTION_NAME=bookstore_collection

# ì„œë¹„ìŠ¤ ì„¤ì •
FAST_API_HOST=0.0.0.0
FAST_API_PORT=8000
```

### 6. ë²¡í„° ë°ì´í„°ë² ì´ìŠ¤ (ChromaDB) ì„¤ì •

#### ì´ˆê¸° ë²¡í„°DB ìƒì„±
```bash
cd ai-service
# ë²¡í„°DB ë””ë ‰í† ë¦¬ ìƒì„±
mkdir -p data/chroma_db

# ë²¡í„°DB ìƒíƒœ í™•ì¸
python data/prompts/check_vector_db.py
```

#### ë„ì„œ ë°ì´í„° ì„ë² ë”© (ì„ íƒì‚¬í•­)
```bash
# ì „ì²˜ë¦¬ëœ ë„ì„œ ë°ì´í„°ê°€ ìˆëŠ” ê²½ìš°
cd data/prompts/preprocessing
python product_extract.py  # ë„ì„œ ì •ë³´ ì¶”ì¶œ
python emotion_extract.py  # ê°ì • í‚¤ì›Œë“œ ì¶”ì¶œ
python generate_reviews.py # ë¦¬ë·° ë°ì´í„° ìƒì„±
```

### 7. Docker ì„¤ì • (ê¶Œì¥ ë°©ë²•)

#### Docker Compose í™˜ê²½ë³€ìˆ˜ ì„¤ì •
í”„ë¡œì íŠ¸ ë£¨íŠ¸ì— `.env` íŒŒì¼ ìƒì„±:
```env
# MySQL ì„¤ì •
MYSQL_ROOT_PASSWORD=rootpassword
MYSQL_DATABASE=bookstore_db
MYSQL_USER=bookstore_user
MYSQL_PASSWORD=your_database_password

# AI ì„œë¹„ìŠ¤ ì„¤ì •
OPENAI_API_KEY=your_openai_api_key_here
AI_SERVICE_BASE_URL=http://ai-service:8000
```

#### Docker Compose ì‹¤í–‰
```bash
# ëª¨ë“  ì„œë¹„ìŠ¤ ì‹œì‘
docker-compose up -d

# ë¡œê·¸ í™•ì¸
docker-compose logs -f

# íŠ¹ì • ì„œë¹„ìŠ¤ ë¡œê·¸ í™•ì¸
docker-compose logs ai-service
docker-compose logs spring-app

# ì„œë¹„ìŠ¤ ì¤‘ì§€
docker-compose down
```

#### Docker ê°œë³„ ë¹Œë“œ (í•„ìš”ì‹œ)
```bash
# AI ì„œë¹„ìŠ¤ ë¹Œë“œ
cd ai-service
docker build -t bookstore-ai .

# Spring Boot ì•± ë¹Œë“œ
docker build -t bookstore-app .
```

### 8. ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹¤í–‰

#### ë°©ë²• 1: Docker Compose ì‚¬ìš© (ê¶Œì¥)
```bash
# ì „ì²´ ì‹œìŠ¤í…œ ì‹œì‘
docker-compose up -d

# ìƒíƒœ í™•ì¸
docker-compose ps
```

#### ë°©ë²• 2: ê°œë³„ ì‹¤í–‰
**1ë‹¨ê³„: MySQL ì‹œì‘ (ë¡œì»¬ ì„¤ì¹˜ ë˜ëŠ” Docker)**
```bash
# Dockerë¡œ MySQLë§Œ ì‹¤í–‰
docker run --name mysql-bookstore \
  -e MYSQL_ROOT_PASSWORD=rootpassword \
  -e MYSQL_DATABASE=bookstore_db \
  -e MYSQL_USER=bookstore_user \
  -e MYSQL_PASSWORD=your_password \
  -p 3306:3306 -d mysql:8.0
```

**2ë‹¨ê³„: AI ì„œë¹„ìŠ¤ ì‹œì‘**
```bash
cd ai-service
# ê°€ìƒí™˜ê²½ í™œì„±í™”
ai_venv\Scripts\activate  # Windows
# source ai_venv/bin/activate  # Linux/Mac

# ì„œë¹„ìŠ¤ ì‹œì‘
python main.py
```

**3ë‹¨ê³„: Spring Boot ì„œë²„ ì‹œì‘**
```bash
# ë³„ë„ í„°ë¯¸ë„ì—ì„œ
mvn clean install
mvn spring-boot:run

# ë˜ëŠ” IDEì—ì„œ AIToyProjectApplication.java ì‹¤í–‰
```

#### ë°©ë²• 3: ìŠ¤í¬ë¦½íŠ¸ ì‚¬ìš©
```bash
# Windows
scripts\start.bat

# Linux/Mac
chmod +x scripts/start.sh
./scripts/start.sh
```

### 9. ì ‘ì† í™•ì¸ ë° í…ŒìŠ¤íŠ¸

#### ì„œë¹„ìŠ¤ ì ‘ì†
- **ë©”ì¸ ì›¹ì‚¬ì´íŠ¸**: `http://localhost:8080`
- **AI ì„œë¹„ìŠ¤**: `http://localhost:8000`
- **AI ì„œë¹„ìŠ¤ í—¬ìŠ¤ì²´í¬**: `http://localhost:8000/health`

#### AI ì±—ë´‡ í…ŒìŠ¤íŠ¸
```bash
# AI ì„œë¹„ìŠ¤ ì§ì ‘ í…ŒìŠ¤íŠ¸
curl -X POST "http://localhost:8000/api/chat" \
  -H "Content-Type: application/json" \
  -d '{"message": "ìš°ìš¸í•  ë•Œ ì½ì„ ì±… ì¶”ì²œí•´ì¤˜"}'
```

#### ë²¡í„°DB ìƒíƒœ í™•ì¸
```bash
cd ai-service
python data/prompts/check_vector_db.py
```

#### Docker ì»¨í…Œì´ë„ˆ ìƒíƒœ í™•ì¸
```bash
# ì»¨í…Œì´ë„ˆ ìƒíƒœ
docker-compose ps

# ë„¤íŠ¸ì›Œí¬ í™•ì¸
docker network ls | grep bookstore

# ë³¼ë¥¨ í™•ì¸
docker volume ls | grep bookstore
```

## ğŸ—„ ë°ì´í„°ë² ì´ìŠ¤ ì„¤ì •

### ìƒ˜í”Œ ë°ì´í„° êµ¬ì„±
í”„ë¡œì íŠ¸ ì‹¤í–‰ í›„ ë‹¤ìŒ ìˆœì„œë¡œ ë°ì´í„°ë¥¼ êµ¬ì„±í•˜ì„¸ìš”:

1. **ê´€ë¦¬ì ê³„ì • ìƒì„±**
```sql
INSERT INTO admin (admin_id, admin_pwd, admin_name, admin_status) 
VALUES ('admin', 'admin123', 'ì‹œìŠ¤í…œ ê´€ë¦¬ì', 'ACTIVE');
```

2. **ì‚¬ìš©ì ë“±ê¸‰ ì„¤ì •**
```sql
INSERT INTO user_grade (user_grade_id, user_grade_name, grade_criteria_start_price, grade_criteria_end_price) VALUES
('BRONZE', 'ë¸Œë¡ ì¦ˆ', 0, 99999),
('SILVER', 'ì‹¤ë²„', 100000, 299999),
('GOLD', 'ê³¨ë“œ', 300000, 499999),
('PLATINUM', 'í”Œë˜í‹°ë„˜', 500000, 999999);
```

3. **ì¹´í…Œê³ ë¦¬ êµ¬ì¡° ìƒì„±**
```sql
-- ëŒ€ë¶„ë¥˜
INSERT INTO top_category (top_category_name) VALUES
('ë¬¸í•™'), ('ì¸ë¬¸'), ('ì‚¬íšŒê³¼í•™'), ('ìì—°ê³¼í•™'), ('ê¸°ìˆ ê³µí•™');

-- ì¤‘ë¶„ë¥˜ (ì˜ˆì‹œ)
INSERT INTO middle_category (top_category, mid_category_name) VALUES
(1, 'í•œêµ­ë¬¸í•™'), (1, 'ì™¸êµ­ë¬¸í•™'), (2, 'ì² í•™'), (2, 'ì—­ì‚¬');

-- ì†Œë¶„ë¥˜ (ì˜ˆì‹œ)  
INSERT INTO low_category (mid_category, low_category_name) VALUES
(1, 'ì†Œì„¤'), (1, 'ì‹œ'), (2, 'ì†Œì„¤'), (3, 'ë™ì–‘ì² í•™');
```

4. **ê²°ì œ ë°©ë²• ì„¤ì •**
```sql
INSERT INTO payment_method (payment_method_id, payment_method_name, is_active) VALUES
('KAKAO_PAY', 'ì¹´ì¹´ì˜¤í˜ì´', true),
('BANK_TRANSFER', 'ê³„ì¢Œì´ì²´', true);
```

### ë°ì´í„°ë² ì´ìŠ¤ ë°±ì—…/ë³µì›
í”„ë¡œì íŠ¸ì—ëŠ” ë°ì´í„°ë² ì´ìŠ¤ êµ¬ì¡°ì™€ ìƒ˜í”Œ ë°ì´í„°ë¥¼ í¬í•¨í•œ SQL íŒŒì¼ì´ ì œê³µë©ë‹ˆë‹¤:
- `RDB/full_export.sql` - í…Œì´ë¸” êµ¬ì¡° ë° ìƒ˜í”Œ ë°ì´í„°

#### ë°ì´í„°ë² ì´ìŠ¤ ë³µì› ë°©ë²•
```bash
  # ì‹¤ì œ ìš´ì˜ ë°ì´í„°ë¡œ ë³µì› (ì¶”ì²œ)
  mysql -u bookstore_user -p bookstore_db < database/full_export.sql
```

## âš™ï¸ í™˜ê²½ ì„¤ì •

### í•„ìˆ˜ ì„¤ì • í•­ëª©

#### 1. KakaoPay API ì„¤ì •
1. [Kakao Developers](https://developers.kakao.com) ì—ì„œ ì•± ìƒì„±
2. ê²°ì œ ì„œë¹„ìŠ¤ í™œì„±í™”
3. Admin Key ë°œê¸‰
4. `application.properties`ì— ì„¤ì •

#### 2. ì´ë©”ì¼ ì„¤ì • (Gmail ê¸°ì¤€)
1. Gmail ê³„ì •ì—ì„œ ì•± ë¹„ë°€ë²ˆí˜¸ ìƒì„±
2. `application.properties`ì— ì´ë©”ì¼ ì •ë³´ ì„¤ì •

#### 3. ë³´ì•ˆ ì„¤ì • (ìš´ì˜ í™˜ê²½)
```properties
# ìš´ì˜ í™˜ê²½ì—ì„œëŠ” ë°˜ë“œì‹œ ë³€ê²½
spring.jpa.hibernate.ddl-auto=validate
spring.jpa.show-sql=false
logging.level.org.hibernate.SQL=WARN
```

### ì„ íƒ ì„¤ì • í•­ëª©

#### 1. ì´ë¯¸ì§€ ì—…ë¡œë“œ ê²½ë¡œ
```properties
file.upload.path=/path/to/upload/directory
```

#### 2. ì„¸ì…˜ ì„¤ì •
```properties
server.servlet.session.timeout=30m
server.servlet.session.cookie.max-age=1800
```

## ğŸš¨ íŠ¸ëŸ¬ë¸”ìŠˆíŒ…

ì£¼ìš” íŠ¸ëŸ¬ë¸”ìŠˆíŒ… ë‚´ìš©ì€ ë³„ë„ ë¬¸ì„œë¥¼ ì°¸ì¡°í•˜ì„¸ìš”:
- [ğŸ“‹ TROUBLESHOOTING.md](TROUBLESHOOTING.md) - ìƒì„¸ íŠ¸ëŸ¬ë¸”ìŠˆíŒ… ê°€ì´ë“œ

### ìì£¼ ë°œìƒí•˜ëŠ” ë¬¸ì œ

#### 1. ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ì‹¤íŒ¨
```
Could not create connection to database server
```
**í•´ê²°ë°©ë²•:**
- MySQL ì„œë²„ ì‹¤í–‰ ìƒíƒœ í™•ì¸
- ë°ì´í„°ë² ì´ìŠ¤ ê³„ì • ê¶Œí•œ í™•ì¸
- í¬íŠ¸ ë²ˆí˜¸ í™•ì¸ (ê¸°ë³¸: 3306)

#### 2. KakaoPay API ì˜¤ë¥˜
```
ì¹´ì¹´ì˜¤í˜ì´ ê²°ì œ ì¤€ë¹„ ì‹¤íŒ¨
```
**í•´ê²°ë°©ë²•:**
- Admin Key í™•ì¸
- CID í™•ì¸
- ë„¤íŠ¸ì›Œí¬ ì—°ê²° ìƒíƒœ í™•ì¸

#### 3. ì´ë©”ì¼ ë°œì†¡ ì‹¤íŒ¨
```
Failed to send email
```
**í•´ê²°ë°©ë²•:**
- Gmail ì•± ë¹„ë°€ë²ˆí˜¸ í™•ì¸
- SMTP í¬íŠ¸ í™•ì¸ (587)
- ë°©í™”ë²½ ì„¤ì • í™•ì¸

## ğŸ§ª í…ŒìŠ¤íŠ¸ ê³„ì •

### ê´€ë¦¬ì ê³„ì •
- **ID**: `admin_1`
- **Password**: `admin1!`

### ì¼ë°˜ ì‚¬ìš©ì ê³„ì • (ìƒ˜í”Œ ë°ì´í„° ë¡œë“œ í›„)
- **ID**: `fastcampus`
- **Password**: `fast123!`

## ğŸ“‚ í”„ë¡œì íŠ¸ êµ¬ì¡°
```
KDT_BE12_Toy_Project4/
â”œâ”€â”€ src/main/java/bookstore_ai_project/       # Spring Boot ë©”ì¸ ì• í”Œë¦¬ì¼€ì´ì…˜
â”‚   â”œâ”€â”€ config/                               # ì„¤ì • í´ë˜ìŠ¤ (SecurityConfig, WebConfig)
â”‚   â”œâ”€â”€ controller/                           # ì»¨íŠ¸ë¡¤ëŸ¬ (AIChatController, ProductController ë“±)
â”‚   â”œâ”€â”€ dto/                                  # ë°ì´í„° ì „ì†¡ ê°ì²´
â”‚   â”œâ”€â”€ entity/                               # JPA ì—”í‹°í‹°
â”‚   â”œâ”€â”€ repository/                           # ë°ì´í„° ì•¡ì„¸ìŠ¤ ë ˆì´ì–´
â”‚   â”œâ”€â”€ service/                              # ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ (AIChatService ë“±)
â”‚   â””â”€â”€ scheduler/                            # ìŠ¤ì¼€ì¤„ëŸ¬ (DormantCheckScheduler)
â”œâ”€â”€ ai-service/                               # Python AI ì„œë¹„ìŠ¤
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ agents/
â”‚   â”‚   â”‚   â”œâ”€â”€ recommend_agent.py            # ë„ì„œ ì¶”ì²œ ì—ì´ì „íŠ¸
â”‚   â”‚   â”‚   â””â”€â”€ wiki_search_agent.py          # ìœ„í‚¤ ê²€ìƒ‰ ì—ì´ì „íŠ¸
â”‚   â”‚   â”œâ”€â”€ chains/
â”‚   â”‚   â”‚   â”œâ”€â”€ intent_classify_chain.py      # ì˜ë„ ë¶„ë¥˜ ì²´ì¸
â”‚   â”‚   â”‚   â”œâ”€â”€ query_analysis_chain.py       # ì¿¼ë¦¬ ë¶„ì„ ì²´ì¸
â”‚   â”‚   â”‚   â”œâ”€â”€ clarification_chain.py        # ëª…í™•í™” ì²´ì¸
â”‚   â”‚   â”‚   â””â”€â”€ wiki_search_chain.py          # ìœ„í‚¤ ê²€ìƒ‰ ì²´ì¸
â”‚   â”‚   â”œâ”€â”€ main_agent/
â”‚   â”‚   â”‚   â”œâ”€â”€ main_agent.py                 # ë©”ì¸ ì—ì´ì „íŠ¸
â”‚   â”‚   â”‚   â””â”€â”€ intent_router.py              # ì˜ë„ ë¼ìš°í„°
â”‚   â”‚   â”œâ”€â”€ config/
â”‚   â”‚   â”‚   â””â”€â”€ llm.py                        # LLM ì„¤ì •
â”‚   â”‚   â”œâ”€â”€ prompts/                          # í”„ë¡¬í”„íŠ¸ í…œí”Œë¦¿
â”‚   â”‚   â”œâ”€â”€ utils/                            # ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜
â”‚   â”‚   â””â”€â”€ models/                           # ë°ì´í„° ëª¨ë¸
â”‚   â”œâ”€â”€ data/
â”‚   â”‚   â”œâ”€â”€ chroma_db/                        # ë²¡í„° ë°ì´í„°ë² ì´ìŠ¤
â”‚   â”‚   â””â”€â”€ prompts/
â”‚   â”‚       â”œâ”€â”€ search_engine.py              # í•˜ì´ë¸Œë¦¬ë“œ ê²€ìƒ‰ ì—”ì§„
â”‚   â”‚       â””â”€â”€ preprocessing/                # ë°ì´í„° ì „ì²˜ë¦¬ ìŠ¤í¬ë¦½íŠ¸
â”‚   â”œâ”€â”€ main.py                               # FastAPI ì„œë²„
â”‚   â””â”€â”€ requirements.txt                      # Python ì˜ì¡´ì„±
â”œâ”€â”€ scripts/                                  # ìš´ì˜ ìŠ¤í¬ë¦½íŠ¸
â”‚   â”œâ”€â”€ start.bat, start.sh                   # ì„œë¹„ìŠ¤ ì‹œì‘ ìŠ¤í¬ë¦½íŠ¸
â”‚   â”œâ”€â”€ stop.bat, stop.sh                     # ì„œë¹„ìŠ¤ ì¤‘ì§€ ìŠ¤í¬ë¦½íŠ¸
â”‚   â””â”€â”€ chromadb_reset.bat                    # ë²¡í„°DB ì´ˆê¸°í™”
â”œâ”€â”€ docker-compose.yml                        # Docker Compose ì„¤ì •
â””â”€â”€ README.md, TROUBLESHOOTING.md             # ë¬¸ì„œ
```

## ğŸ”§ ì„±ëŠ¥ ìµœì í™”

### ìºì‹± ì „ëµ
- ì¬ê³  ì¡°íšŒ API ìºì‹± (30ì´ˆ)
- ì¸ê¸° ê²€ìƒ‰ì–´ ìºì‹± (1ì‹œê°„)
- ì¹´í…Œê³ ë¦¬ êµ¬ì¡° ìºì‹± (ì„¸ì…˜ë³„)

### ë°ì´í„°ë² ì´ìŠ¤ ìµœì í™”
- ì§€ì—° ë¡œë”© (Lazy Loading) ì „ëµ
- ë³µí•©í‚¤ ì¸ë±ìŠ¤ í™œìš©
- ì¿¼ë¦¬ ìµœì í™” (N+1 ë¬¸ì œ í•´ê²°)

### AI ì„œë¹„ìŠ¤ ìµœì í™”
- **MMR ê¸°ë°˜ ë‹¤ì–‘ì„± ê²€ìƒ‰** (`k=3, fetch_k=10, lambda_mult=0.7`)
- **í•˜ì´ë¸Œë¦¬ë“œ ìŠ¤ì½”ì–´ë§ ì‹œìŠ¤í…œ** (ê°ì •í‚¤ì›Œë“œ +4ì , ì œí’ˆí‚¤ì›Œë“œ +3ì )
- **ë²¡í„° ì„ë² ë”© ìºì‹±** (ChromaDB ì˜êµ¬ ì €ì¥)
- **ì„¸ì…˜ ê¸°ë°˜ ëŒ€í™” ê´€ë¦¬** (ë¸Œë¼ìš°ì € ì¢…ë£Œê¹Œì§€ ìœ ì§€)
- **í´ë¼ì´ì–¸íŠ¸ ì‚¬ì´ë“œ ìºì‹±** (30ì´ˆ TTL)

## ğŸš€ ë°°í¬ ì •ë³´

### ê°œë°œ í™˜ê²½
- **Java**: OpenJDK 17
- **Spring Boot**: 3.3.1
- **MySQL**: 8.0.33
- **Port**: 8080

### ìš´ì˜ í™˜ê²½ ê³ ë ¤ì‚¬í•­
- SSL ì¸ì¦ì„œ ì ìš© í•„ìš”
- ë°ì´í„°ë² ì´ìŠ¤ ì„±ëŠ¥ íŠœë‹
- ë¡œë“œ ë°¸ëŸ°ì‹± êµ¬ì„±
- ë³´ì•ˆ ê°•í™” (ë¹„ë°€ë²ˆí˜¸ ì•”í˜¸í™” ë“±)

## ğŸ¤ ê¸°ì—¬í•˜ê¸°
1. Fork the Project
2. Create your Feature Branch (`git checkout -b feature/AmazingFeature`)
3. Commit your Changes (`git commit -m 'Add some AmazingFeature'`)
4. Push to the Branch (`git push origin feature/AmazingFeature`)
5. Open a Pull Request

## ğŸ“ ë¼ì´ì„ ìŠ¤
ì´ í”„ë¡œì íŠ¸ëŠ” MIT ë¼ì´ì„ ìŠ¤ í•˜ì— ë°°í¬ë©ë‹ˆë‹¤. ìì„¸í•œ ë‚´ìš©ì€ `LICENSE` íŒŒì¼ì„ ì°¸ì¡°í•˜ì„¸ìš”.

---

**ì±…í¬ì¸** - Spring Bootë¡œ êµ¬í˜„í•œ ì¢…í•© ì˜¨ë¼ì¸ ì„œì  ì‹œìŠ¤í…œ